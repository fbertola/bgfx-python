import ctypes
from ctypes import c_uint64

from bgfx_python.bgfx_python import *

BGFX_PCI_ID_NONE = 0x0000
BGFX_PCI_ID_SOFTWARE_RASTERIZER = 0x0001
BGFX_PCI_ID_AMD = 0x1002
BGFX_PCI_ID_INTEL = 0x8086
BGFX_PCI_ID_NVIDIA = 0x10DE

BGFX_RESET_NONE = 0x00000000
BGFX_RESET_FULLSCREEN = 0x00000001
BGFX_RESET_FULLSCREEN_SHIFT = 0
BGFX_RESET_FULLSCREEN_MASK = 0x00000001
BGFX_RESET_MSAA_X2 = 0x00000010
BGFX_RESET_MSAA_X4 = 0x00000020
BGFX_RESET_MSAA_X8 = 0x00000030
BGFX_RESET_MSAA_X16 = 0x00000040
BGFX_RESET_MSAA_SHIFT = 4
BGFX_RESET_MSAA_MASK = 0x00000070
BGFX_RESET_VSYNC = 0x00000080
BGFX_RESET_MAXANISOTROPY = 0x00000100
BGFX_RESET_CAPTURE = 0x00000200
BGFX_RESET_HMD = 0x00000400
BGFX_RESET_HMD_DEBUG = 0x00000800
BGFX_RESET_HMD_RECENTER = 0x00001000

BGFX_RESET_FLUSH_AFTER_RENDER = 0x00002000

BGFX_RESET_FLIP_AFTER_RENDER = 0x00004000
BGFX_RESET_SRGB_BACKBUFFER = 0x00008000
BGFX_RESET_HIDPI = 0x00010000
BGFX_RESET_DEPTH_CLAMP = 0x00020000
BGFX_RESET_RESERVED_SHIFT = 31
BGFX_RESET_RESERVED_MASK = 0x80000000

BGFX_CLEAR_NONE = 0x0000
BGFX_CLEAR_COLOR = 0x0001
BGFX_CLEAR_DEPTH = 0x0002
BGFX_CLEAR_STENCIL = 0x0004
BGFX_CLEAR_DISCARD_COLOR_0 = 0x0008
BGFX_CLEAR_DISCARD_COLOR_1 = 0x0010
BGFX_CLEAR_DISCARD_COLOR_2 = 0x0020
BGFX_CLEAR_DISCARD_COLOR_3 = 0x0040
BGFX_CLEAR_DISCARD_COLOR_4 = 0x0080
BGFX_CLEAR_DISCARD_COLOR_5 = 0x0100
BGFX_CLEAR_DISCARD_COLOR_6 = 0x0200
BGFX_CLEAR_DISCARD_COLOR_7 = 0x0400
BGFX_CLEAR_DISCARD_DEPTH = 0x0800
BGFX_CLEAR_DISCARD_STENCIL = 0x1000

BGFX_CLEAR_DISCARD_COLOR_MASK = (
        0
        | BGFX_CLEAR_DISCARD_COLOR_0
        | BGFX_CLEAR_DISCARD_COLOR_1
        | BGFX_CLEAR_DISCARD_COLOR_2
        | BGFX_CLEAR_DISCARD_COLOR_3
        | BGFX_CLEAR_DISCARD_COLOR_4
        | BGFX_CLEAR_DISCARD_COLOR_5
        | BGFX_CLEAR_DISCARD_COLOR_6
        | BGFX_CLEAR_DISCARD_COLOR_7
)
BGFX_CLEAR_DISCARD_MASK = (
        0
        | BGFX_CLEAR_DISCARD_COLOR_MASK
        | BGFX_CLEAR_DISCARD_DEPTH
        | BGFX_CLEAR_DISCARD_STENCIL
)

BGFX_DEBUG_NONE = 0x00000000
BGFX_DEBUG_WIREFRAME = 0x00000001
BGFX_DEBUG_IFH = 0x00000002
BGFX_DEBUG_STATS = 0x00000004
BGFX_DEBUG_TEXT = 0x00000008

BGFX_BUFFER_NONE = 0x0000

BGFX_INVALID_HANDLE = 0xFFFF

BGFX_STATE_RGB_WRITE = c_uint64(0x0000000000000001)
BGFX_STATE_ALPHA_WRITE = c_uint64(0x0000000000000002)
BGFX_STATE_DEPTH_WRITE = c_uint64(0x0000000000000004)

BGFX_STATE_DEPTH_TEST_LESS = c_uint64(0x0000000000000010)
BGFX_STATE_DEPTH_TEST_LEQUAL = c_uint64(0x0000000000000020)
BGFX_STATE_DEPTH_TEST_EQUAL = c_uint64(0x0000000000000030)
BGFX_STATE_DEPTH_TEST_GEQUAL = c_uint64(0x0000000000000040)
BGFX_STATE_DEPTH_TEST_GREATER = c_uint64(0x0000000000000050)
BGFX_STATE_DEPTH_TEST_NOTEQUAL = c_uint64(0x0000000000000060)
BGFX_STATE_DEPTH_TEST_NEVER = c_uint64(0x0000000000000070)
BGFX_STATE_DEPTH_TEST_ALWAYS = c_uint64(0x0000000000000080)
BGFX_STATE_DEPTH_TEST_SHIFT = c_uint64(4)
BGFX_STATE_DEPTH_TEST_MASK = c_uint64(0x00000000000000F0)

BGFX_STATE_BLEND_ZERO = c_uint64(0x0000000000001000)
BGFX_STATE_BLEND_ONE = c_uint64(0x0000000000002000)
BGFX_STATE_BLEND_SRC_COLOR = c_uint64(0x0000000000003000)
BGFX_STATE_BLEND_INV_SRC_COLOR = c_uint64(0x0000000000004000)
BGFX_STATE_BLEND_SRC_ALPHA = c_uint64(0x0000000000005000)
BGFX_STATE_BLEND_INV_SRC_ALPHA = c_uint64(0x0000000000006000)
BGFX_STATE_BLEND_DST_ALPHA = c_uint64(0x0000000000007000)
BGFX_STATE_BLEND_INV_DST_ALPHA = c_uint64(0x0000000000008000)
BGFX_STATE_BLEND_DST_COLOR = c_uint64(0x0000000000009000)
BGFX_STATE_BLEND_INV_DST_COLOR = c_uint64(0x000000000000A000)
BGFX_STATE_BLEND_SRC_ALPHA_SAT = c_uint64(0x000000000000B000)
BGFX_STATE_BLEND_FACTOR = c_uint64(0x000000000000C000)
BGFX_STATE_BLEND_INV_FACTOR = c_uint64(0x000000000000D000)
BGFX_STATE_BLEND_SHIFT = c_uint64(12)
BGFX_STATE_BLEND_MASK = c_uint64(0x000000000FFFF000)

BGFX_STATE_BLEND_EQUATION_ADD = c_uint64(0x0000000000000000)
BGFX_STATE_BLEND_EQUATION_SUB = c_uint64(0x0000000010000000)
BGFX_STATE_BLEND_EQUATION_REVSUB = c_uint64(0x0000000020000000)
BGFX_STATE_BLEND_EQUATION_MIN = c_uint64(0x0000000030000000)
BGFX_STATE_BLEND_EQUATION_MAX = c_uint64(0x0000000040000000)
BGFX_STATE_BLEND_EQUATION_SHIFT = c_uint64(28)
BGFX_STATE_BLEND_EQUATION_MASK = c_uint64(0x00000003F0000000)

BGFX_STATE_BLEND_INDEPENDENT = c_uint64(0x0000000400000000)

BGFX_STATE_CULL_CW = c_uint64(0x0000001000000000)
BGFX_STATE_CULL_CCW = c_uint64(0x0000002000000000)
BGFX_STATE_CULL_SHIFT = c_uint64(36)
BGFX_STATE_CULL_MASK = c_uint64(0x0000003000000000)

BGFX_STATE_ALPHA_REF_SHIFT = c_uint64(40)
BGFX_STATE_ALPHA_REF_MASK = c_uint64(0x0000FF0000000000)

BGFX_STATE_PT_TRISTRIP = c_uint64(0x0001000000000000)
BGFX_STATE_PT_LINES = c_uint64(0x0002000000000000)
BGFX_STATE_PT_LINESTRIP = c_uint64(0x0003000000000000)
BGFX_STATE_PT_POINTS = c_uint64(0x0004000000000000)
BGFX_STATE_PT_SHIFT = c_uint64(48)
BGFX_STATE_PT_MASK = c_uint64(0x0007000000000000)

BGFX_STATE_POINT_SIZE_SHIFT = c_uint64(52)
BGFX_STATE_POINT_SIZE_MASK = c_uint64(0x0FF0000000000000)

BGFX_STATE_MSAA = c_uint64(0x1000000000000000)

BGFX_STATE_NONE = c_uint64(0x0000000000000000)
BGFX_STATE_MASK = c_uint64(0xFFFFFFFFFFFFFFFF)

BGFX_STATE_DEFAULT = (
        c_uint64(0x0000000000000000).value
        | BGFX_STATE_RGB_WRITE.value
        | BGFX_STATE_ALPHA_WRITE.value
        | BGFX_STATE_DEPTH_TEST_LESS.value
        | BGFX_STATE_DEPTH_WRITE.value
        | BGFX_STATE_CULL_CW.value
        | BGFX_STATE_MSAA.value
)


def as_void_ptr(obj):
    ctypes.pythonapi.PyCapsule_New.restype = ctypes.py_object
    ctypes.pythonapi.PyCapsule_New.argtypes = [
        ctypes.c_void_p,
        ctypes.c_char_p,
        ctypes.c_void_p,
    ]
    if type(obj) != ctypes.c_void_p:
        obj = ctypes.cast(obj, ctypes.c_void_p)
    return ctypes.pythonapi.PyCapsule_New(obj, None, None)
